jQuery.fn.selectbox=function(i){var a={className:"jquery-selectbox",animationSpeed:"normal",listboxMaxSize:10,replaceInvisible:false},k=false,n=function(b){var c=b.parents("."+a.className+"");b.slideDown(a.animationSpeed,function(){k=true});c.addClass("selecthover");jQuery(document).bind("click",m);return b},j=function(b){b.parents("."+a.className+"");b.slideUp(a.animationSpeed,function(){k=false;jQuery(this).parents("."+a.className+"").removeClass("selecthover")});jQuery(document).unbind("click",
m);return b},m=function(b){b=b.target;var c=jQuery("."+a.className+"-list:visible").parent().find("*").andSelf();jQuery.inArray(b,c)<0&&k&&j(jQuery(".jquery-custom-selectboxes-replaced-list"));return false};a=jQuery.extend(a,i||{});return this.each(function(){var b=jQuery(this);if(!(b.filter(":visible").length==0&&!a.replaceInvisible)){var c=jQuery('<div class="'+a.className+' jquery-custom-selectboxes-replaced"><div class="'+a.className+'-moreButton" /><div class="'+a.className+'-list jquery-custom-selectboxes-replaced-list" /><span class="'+
a.className+'-currentItem" /></div>');jQuery("option",b).each(function(e,f){f=jQuery(f);var o=jQuery('<span class="'+a.className+"-item value-"+f.val()+" item-"+e+'">'+f.text()+"</span>");o.click(function(){var g=jQuery(this),l=g.parents("."+a.className),d=g[0].className.split(" ");for(k1 in d)if(/^item-[0-9]+$/.test(d[k1])){parseInt(d[k1].replace("item-",""),10);break}d=g[0].className.split(" ");for(k1 in d)if(/^value-.+$/.test(d[k1])){d=d[k1].replace("value-","");break}l.find("."+a.className+"-currentItem").text(g.text());
l.find("select").val(d).triggerHandler("change");g=l.find("."+a.className+"-list");g.filter(":visible").length>0?j(g):n(g)}).bind("mouseenter",function(){jQuery(this).addClass("listelementhover")}).bind("mouseleave",function(){jQuery(this).removeClass("listelementhover")});jQuery("."+a.className+"-list",c).append(o);f.filter(":selected").length>0&&jQuery("."+a.className+"-currentItem",c).text(f.text())});c.find("."+a.className+"-moreButton").click(function(){var e=jQuery(this),f=jQuery("."+a.className+
"-list").not(e.siblings("."+a.className+"-list"));j(f);e=e.siblings("."+a.className+"-list");e.filter(":visible").length>0?j(e):n(e)}).bind("mouseenter",function(){jQuery(this).addClass("morebuttonhover")}).bind("mouseleave",function(){jQuery(this).removeClass("morebuttonhover")});b.hide().replaceWith(c).appendTo(c);var p=c.find("."+a.className+"-list"),h=p.find("."+a.className+"-item").length;if(h>(-a.listboxMaxSize))h=a.listboxMaxSize;if(h==0)h=1;b=Math.round(b.width()+5);if(jQuery.browser.safari)b*=
0.94;c.css("width",b+"px");p.css({width:Math.round(b-5)+"px",height:h+"em"})}})};jQuery.fn.unselectbox=function(){return this.each(function(){var i=jQuery(this).filter(".jquery-custom-selectboxes-replaced");i.replaceWith(i.find("select").show())})};